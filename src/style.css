*,
*::before,
*::after {
	box-sizing: border-box;
}

/* Disable double-tap-to-zoom while preserving pinch zoom */
html {
	touch-action: manipulation;
}

button {
	touch-action: manipulation;
}

:root {
	font-family: "Georgia", "Times New Roman", serif;
	line-height: 1.5;
	font-weight: 400;
	color: #4a3f35;

	font-synthesis: none;
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

body {
	margin: 0;
	min-height: 100vh;
	min-height: 100dvh;
	position: relative;
	overflow-x: hidden;

	/* Warm forest gradient background */
	/* Soft light rays */
	background:
		radial-gradient(
			ellipse 80% 50% at 30% 20%,
			rgba(255, 248, 220, 0.4) 0%,
			transparent 50%
		),
		radial-gradient(
			ellipse 60% 40% at 70% 30%,
			rgba(255, 240, 200, 0.3) 0%,
			transparent 45%
		),
		/* Main forest gradient */
		linear-gradient(
			180deg,
			#8fa876 0%,
			#7a9968 15%,
			#6b8a5a 30%,
			#5d7b4d 50%,
			#4f6c42 70%,
			#415d38 85%,
			#3a5232 100%
		);
}

/* Floating particles / fireflies effect */
body::before {
	content: "";
	position: fixed;
	inset: 0;
	pointer-events: none;
	background-image:
		radial-gradient(
			circle at 20% 30%,
			rgba(255, 250, 205, 0.6) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 80% 20%,
			rgba(255, 250, 205, 0.5) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 60% 70%,
			rgba(255, 250, 205, 0.4) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 10% 80%,
			rgba(255, 250, 205, 0.5) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 90% 60%,
			rgba(255, 250, 205, 0.4) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 40% 90%,
			rgba(255, 250, 205, 0.3) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 70% 40%,
			rgba(255, 250, 205, 0.5) 0%,
			transparent 2px
		);
	animation: float 8s ease-in-out infinite;
}

@keyframes float {
	0%,
	100% {
		transform: translateY(0) translateX(0);
		opacity: 0.7;
	}
	25% {
		transform: translateY(-10px) translateX(5px);
		opacity: 1;
	}
	50% {
		transform: translateY(-5px) translateX(-5px);
		opacity: 0.8;
	}
	75% {
		transform: translateY(-15px) translateX(3px);
		opacity: 0.9;
	}
}

/* Decorative forest floor elements */
body::after {
	content: "";
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	height: 120px;
	pointer-events: none;
	/* Ferns and leaves silhouettes */
	background:
		radial-gradient(ellipse 30px 20px at 10% 100%, #3d5a30 0%, transparent 70%),
		radial-gradient(ellipse 25px 18px at 15% 95%, #4a6b3a 0%, transparent 70%),
		radial-gradient(ellipse 35px 22px at 85% 100%, #3d5a30 0%, transparent 70%),
		radial-gradient(ellipse 28px 16px at 90% 92%, #4a6b3a 0%, transparent 70%),
		radial-gradient(ellipse 40px 25px at 50% 100%, #3d5a30 0%, transparent 70%),
		radial-gradient(ellipse 20px 15px at 30% 98%, #4a6b3a 0%, transparent 70%),
		radial-gradient(ellipse 22px 14px at 70% 96%, #4a6b3a 0%, transparent 70%);
}

#app {
	position: relative;
	z-index: 1;
}

/* Ice biome - snowy winter theme */
body.biome-ice {
	background:
		radial-gradient(
			ellipse 80% 50% at 30% 20%,
			rgba(220, 235, 255, 0.5) 0%,
			transparent 50%
		),
		radial-gradient(
			ellipse 60% 40% at 70% 30%,
			rgba(200, 220, 250, 0.4) 0%,
			transparent 45%
		),
		/* Main winter gradient */
		linear-gradient(
			180deg,
			#7a8fa8 0%,
			#6a80a0 15%,
			#5a7098 30%,
			#4a6090 50%,
			#3a5088 70%,
			#2a4080 85%,
			#203878 100%
		);
}

/* Snowflakes instead of fireflies */
body.biome-ice::before {
	background-image: none;
	animation: none;
}

/* Snowflakes container */
body.biome-ice::after {
	content: "";
	position: fixed;
	inset: 0;
	bottom: auto;
	height: 100%;
	pointer-events: none;
	background:
		radial-gradient(
			circle at 10% 20%,
			rgba(255, 255, 255, 0.9) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 25% 40%,
			rgba(255, 255, 255, 0.8) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 40% 10%,
			rgba(255, 255, 255, 0.7) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 55% 35%,
			rgba(255, 255, 255, 0.9) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 70% 15%,
			rgba(255, 255, 255, 0.8) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 85% 45%,
			rgba(255, 255, 255, 0.7) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 15% 60%,
			rgba(255, 255, 255, 0.8) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 35% 80%,
			rgba(255, 255, 255, 0.9) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 60% 70%,
			rgba(255, 255, 255, 0.7) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 80% 85%,
			rgba(255, 255, 255, 0.8) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 95% 25%,
			rgba(255, 255, 255, 0.9) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 5% 90%,
			rgba(255, 255, 255, 0.7) 0%,
			transparent 2px
		);
	animation: snowfall 10s linear infinite;
}

@keyframes snowfall {
	0% {
		transform: translateY(-100px);
		opacity: 0;
	}
	10% {
		opacity: 1;
	}
	90% {
		opacity: 1;
	}
	100% {
		transform: translateY(100vh);
		opacity: 0;
	}
}

/* Swamp biome - dense murky greens */
body.biome-swamp {
	background:
		radial-gradient(
			ellipse 80% 50% at 30% 20%,
			rgba(80, 100, 60, 0.4) 0%,
			transparent 50%
		),
		radial-gradient(
			ellipse 60% 40% at 70% 30%,
			rgba(60, 80, 45, 0.3) 0%,
			transparent 45%
		),
		/* Main swamp gradient */
		linear-gradient(
			180deg,
			#4a5a3a 0%,
			#3f4f32 15%,
			#35452a 30%,
			#2b3b22 50%,
			#22311a 70%,
			#1a2814 85%,
			#142010 100%
		);
}

/* Murky floating particles for swamp */
body.biome-swamp::before {
	background-image:
		radial-gradient(
			circle at 20% 30%,
			rgba(120, 140, 80, 0.5) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 80% 20%,
			rgba(100, 120, 70, 0.4) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 60% 70%,
			rgba(130, 150, 90, 0.3) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 10% 80%,
			rgba(110, 130, 75, 0.4) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 90% 60%,
			rgba(100, 120, 70, 0.3) 0%,
			transparent 2px
		),
		radial-gradient(
			circle at 40% 90%,
			rgba(120, 140, 80, 0.2) 0%,
			transparent 3px
		),
		radial-gradient(
			circle at 70% 40%,
			rgba(110, 130, 75, 0.4) 0%,
			transparent 2px
		);
	animation: swampFloat 12s ease-in-out infinite;
}

@keyframes swampFloat {
	0%,
	100% {
		transform: translateY(0) translateX(0);
		opacity: 0.5;
	}
	25% {
		transform: translateY(-5px) translateX(3px);
		opacity: 0.7;
	}
	50% {
		transform: translateY(-2px) translateX(-3px);
		opacity: 0.6;
	}
	75% {
		transform: translateY(-8px) translateX(2px);
		opacity: 0.7;
	}
}

/* Swamp floor - dense vegetation */
body.biome-swamp::after {
	background:
		radial-gradient(ellipse 30px 20px at 10% 100%, #1a2810 0%, transparent 70%),
		radial-gradient(ellipse 25px 18px at 15% 95%, #253818 0%, transparent 70%),
		radial-gradient(ellipse 35px 22px at 85% 100%, #1a2810 0%, transparent 70%),
		radial-gradient(ellipse 28px 16px at 90% 92%, #253818 0%, transparent 70%),
		radial-gradient(ellipse 40px 25px at 50% 100%, #1a2810 0%, transparent 70%),
		radial-gradient(ellipse 20px 15px at 30% 98%, #253818 0%, transparent 70%),
		radial-gradient(ellipse 22px 14px at 70% 96%, #253818 0%, transparent 70%);
}

/* Night biome - dark blues and purples with fireflies */
body.biome-night {
	background:
		radial-gradient(
			ellipse 80% 50% at 30% 20%,
			rgba(30, 40, 60, 0.4) 0%,
			transparent 50%
		),
		radial-gradient(
			ellipse 60% 40% at 70% 30%,
			rgba(20, 30, 50, 0.3) 0%,
			transparent 45%
		),
		/* Main night gradient */
		linear-gradient(
			180deg,
			#1a1a2e 0%,
			#16182a 15%,
			#121626 30%,
			#0e1420 50%,
			#0a101a 70%,
			#080c14 85%,
			#050810 100%
		);
}

/* Fireflies instead of forest particles */
body.biome-night::before {
	background-image:
		radial-gradient(
			circle at 20% 30%,
			rgba(255, 255, 150, 0.8) 0%,
			rgba(200, 255, 100, 0.4) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 80% 20%,
			rgba(255, 255, 150, 0.7) 0%,
			rgba(200, 255, 100, 0.3) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 60% 70%,
			rgba(255, 255, 150, 0.6) 0%,
			rgba(200, 255, 100, 0.3) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 10% 80%,
			rgba(255, 255, 150, 0.7) 0%,
			rgba(200, 255, 100, 0.4) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 90% 60%,
			rgba(255, 255, 150, 0.5) 0%,
			rgba(200, 255, 100, 0.2) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 40% 90%,
			rgba(255, 255, 150, 0.6) 0%,
			rgba(200, 255, 100, 0.3) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 70% 40%,
			rgba(255, 255, 150, 0.7) 0%,
			rgba(200, 255, 100, 0.4) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 30% 55%,
			rgba(255, 255, 150, 0.5) 0%,
			rgba(200, 255, 100, 0.2) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 85% 85%,
			rgba(255, 255, 150, 0.6) 0%,
			rgba(200, 255, 100, 0.3) 2px,
			transparent 3px
		);
	animation: fireflies 6s ease-in-out infinite;
}

@keyframes fireflies {
	0%,
	100% {
		transform: translateY(0) translateX(0);
		opacity: 0.5;
	}
	20% {
		transform: translateY(-8px) translateX(4px);
		opacity: 0.9;
	}
	40% {
		transform: translateY(-4px) translateX(-6px);
		opacity: 0.6;
	}
	60% {
		transform: translateY(-12px) translateX(2px);
		opacity: 0.85;
	}
	80% {
		transform: translateY(-6px) translateX(-3px);
		opacity: 0.7;
	}
}

/* Night floor - dark vegetation silhouettes */
body.biome-night::after {
	background:
		radial-gradient(ellipse 30px 20px at 10% 100%, #0a1015 0%, transparent 70%),
		radial-gradient(ellipse 25px 18px at 15% 95%, #101820 0%, transparent 70%),
		radial-gradient(ellipse 35px 22px at 85% 100%, #0a1015 0%, transparent 70%),
		radial-gradient(ellipse 28px 16px at 90% 92%, #101820 0%, transparent 70%),
		radial-gradient(ellipse 40px 25px at 50% 100%, #0a1015 0%, transparent 70%),
		radial-gradient(ellipse 20px 15px at 30% 98%, #101820 0%, transparent 70%),
		radial-gradient(ellipse 22px 14px at 70% 96%, #101820 0%, transparent 70%);
}

/* Beach biome - warm sandy tones with ocean blues */
body.biome-beach {
	background:
		/* Ocean at top */
		radial-gradient(
			ellipse 100% 40% at 50% 0%,
			rgba(70, 150, 200, 0.3) 0%,
			transparent 70%
		),
		/* Sun glow */
		radial-gradient(
			ellipse 50% 30% at 80% 15%,
			rgba(255, 200, 100, 0.25) 0%,
			transparent 60%
		),
		/* Main beach gradient */
		linear-gradient(
			180deg,
			#87ceeb 0%,
			#6bb8d6 10%,
			#5aa5c4 20%,
			#d4b896 35%,
			#c8a878 50%,
			#b8946a 65%,
			#a88560 80%,
			#987550 100%
		);
}

/* Ocean waves and sparkles */
body.biome-beach::before {
	background-image:
		/* Wave foam lines */
		radial-gradient(
			ellipse 200% 4px at 0% 25%,
			rgba(255, 255, 255, 0.6) 0%,
			rgba(255, 255, 255, 0.3) 30%,
			transparent 50%
		),
		radial-gradient(
			ellipse 200% 3px at 100% 28%,
			rgba(255, 255, 255, 0.5) 0%,
			rgba(255, 255, 255, 0.2) 30%,
			transparent 50%
		),
		/* Sun sparkles on water */
		radial-gradient(
			circle at 75% 8%,
			rgba(255, 255, 200, 0.9) 0%,
			rgba(255, 255, 150, 0.4) 2px,
			transparent 4px
		),
		radial-gradient(
			circle at 82% 12%,
			rgba(255, 255, 200, 0.7) 0%,
			rgba(255, 255, 150, 0.3) 2px,
			transparent 4px
		),
		radial-gradient(
			circle at 68% 15%,
			rgba(255, 255, 200, 0.6) 0%,
			rgba(255, 255, 150, 0.2) 2px,
			transparent 3px
		),
		radial-gradient(
			circle at 90% 6%,
			rgba(255, 255, 200, 0.8) 0%,
			rgba(255, 255, 150, 0.3) 2px,
			transparent 4px
		),
		radial-gradient(
			circle at 60% 10%,
			rgba(255, 255, 200, 0.5) 0%,
			rgba(255, 255, 150, 0.2) 2px,
			transparent 3px
		);
	animation: oceanWaves 4s ease-in-out infinite;
}

@keyframes oceanWaves {
	0%,
	100% {
		transform: translateX(0);
		opacity: 0.7;
	}
	25% {
		transform: translateX(8px);
		opacity: 0.9;
	}
	50% {
		transform: translateX(4px);
		opacity: 0.8;
	}
	75% {
		transform: translateX(12px);
		opacity: 0.85;
	}
}

/* Beach floor - sand dunes and shells */
body.biome-beach::after {
	background:
		/* Sand dunes at bottom */
		radial-gradient(ellipse 50px 25px at 10% 100%, #c4a060 0%, transparent 70%),
		radial-gradient(ellipse 40px 20px at 20% 95%, #d4b070 0%, transparent 70%),
		radial-gradient(ellipse 60px 30px at 85% 100%, #c4a060 0%, transparent 70%),
		radial-gradient(ellipse 45px 22px at 75% 92%, #d4b070 0%, transparent 70%),
		radial-gradient(ellipse 70px 35px at 50% 100%, #c4a060 0%, transparent 70%),
		radial-gradient(ellipse 35px 18px at 35% 98%, #d4b070 0%, transparent 70%),
		radial-gradient(ellipse 38px 20px at 65% 96%, #d4b070 0%, transparent 70%),
		/* Seashell hints */
		radial-gradient(circle at 25% 85%, rgba(255, 245, 230, 0.5) 0%, transparent 4px),
		radial-gradient(circle at 70% 90%, rgba(255, 240, 220, 0.4) 0%, transparent 3px),
		radial-gradient(circle at 45% 88%, rgba(255, 245, 230, 0.3) 0%, transparent 3px);
}

/* Autumn biome - warm orange and golden tones with falling leaves */
body.biome-autumn {
	background:
		/* Warm light glow at top */
		radial-gradient(
			ellipse 80% 50% at 30% 20%,
			rgba(200, 140, 60, 0.3) 0%,
			transparent 50%
		),
		radial-gradient(
			ellipse 60% 40% at 70% 30%,
			rgba(180, 120, 50, 0.25) 0%,
			transparent 45%
		),
		/* Main autumn gradient - warm earth tones */
		linear-gradient(
			180deg,
			#8b6040 0%,
			#7a5535 15%,
			#6a4a2a 30%,
			#5a4020 50%,
			#4a3518 70%,
			#3a2a10 85%,
			#2a2008 100%
		);
}

/* Falling autumn leaves - larger leaf shapes with slow drift */
body.biome-autumn::before {
	background-image:
		/* Leaf shapes - elongated ellipses to simulate leaves */
		/* Large orange leaf */
		radial-gradient(
			ellipse 8px 5px at 12% 10%,
			rgba(220, 100, 50, 0.85) 0%,
			rgba(200, 80, 40, 0.5) 60%,
			transparent 100%
		),
		/* Red-orange leaf */
		radial-gradient(
			ellipse 6px 4px at 78% 5%,
			rgba(200, 70, 35, 0.8) 0%,
			rgba(180, 55, 25, 0.4) 60%,
			transparent 100%
		),
		/* Golden leaf */
		radial-gradient(
			ellipse 7px 4px at 45% 15%,
			rgba(230, 150, 60, 0.75) 0%,
			rgba(210, 130, 45, 0.4) 60%,
			transparent 100%
		),
		/* Deep red leaf */
		radial-gradient(
			ellipse 5px 3px at 25% 25%,
			rgba(180, 50, 30, 0.8) 0%,
			rgba(160, 40, 20, 0.4) 60%,
			transparent 100%
		),
		/* Bright orange leaf */
		radial-gradient(
			ellipse 9px 5px at 88% 20%,
			rgba(235, 120, 55, 0.7) 0%,
			rgba(215, 100, 40, 0.35) 60%,
			transparent 100%
		),
		/* Small golden leaf */
		radial-gradient(
			ellipse 5px 3px at 60% 30%,
			rgba(225, 140, 50, 0.8) 0%,
			rgba(205, 120, 35, 0.4) 60%,
			transparent 100%
		),
		/* Rust colored leaf */
		radial-gradient(
			ellipse 7px 4px at 8% 40%,
			rgba(165, 60, 25, 0.75) 0%,
			rgba(145, 45, 15, 0.4) 60%,
			transparent 100%
		),
		/* Orange leaf mid-screen */
		radial-gradient(
			ellipse 6px 4px at 35% 45%,
			rgba(215, 95, 45, 0.7) 0%,
			rgba(195, 75, 30, 0.35) 60%,
			transparent 100%
		),
		/* Small red leaf */
		radial-gradient(
			ellipse 4px 3px at 72% 35%,
			rgba(190, 55, 30, 0.8) 0%,
			rgba(170, 40, 20, 0.4) 60%,
			transparent 100%
		),
		/* Golden-yellow leaf */
		radial-gradient(
			ellipse 8px 5px at 92% 50%,
			rgba(235, 160, 65, 0.7) 0%,
			rgba(215, 140, 50, 0.35) 60%,
			transparent 100%
		),
		/* Deep orange leaf */
		radial-gradient(
			ellipse 6px 4px at 18% 55%,
			rgba(210, 85, 40, 0.75) 0%,
			rgba(190, 65, 25, 0.4) 60%,
			transparent 100%
		),
		/* Burnt orange leaf */
		radial-gradient(
			ellipse 5px 3px at 55% 60%,
			rgba(195, 70, 35, 0.8) 0%,
			rgba(175, 55, 25, 0.4) 60%,
			transparent 100%
		);
	animation: fallingLeaves 15s linear infinite;
}

@keyframes fallingLeaves {
	0% {
		transform: translateY(-30px) translateX(0) rotate(0deg);
		opacity: 0.75;
	}
	25% {
		transform: translateY(calc(25vh - 30px)) translateX(20px) rotate(25deg);
		opacity: 0.85;
	}
	50% {
		transform: translateY(calc(50vh - 30px)) translateX(-15px) rotate(-15deg);
		opacity: 0.8;
	}
	75% {
		transform: translateY(calc(75vh - 30px)) translateX(25px) rotate(20deg);
		opacity: 0.7;
	}
	100% {
		transform: translateY(calc(100vh - 30px)) translateX(0) rotate(0deg);
		opacity: 0.75;
	}
}

/* Autumn floor - fallen leaves and earth */
body.biome-autumn::after {
	background:
		/* Piles of fallen leaves - muted to match darker theme */
		radial-gradient(ellipse 40px 18px at 10% 100%, #8b4020 0%, transparent 70%),
		radial-gradient(ellipse 30px 12px at 18% 95%, #9b5030 0%, transparent 70%),
		radial-gradient(ellipse 45px 20px at 85% 100%, #7b3018 0%, transparent 70%),
		radial-gradient(ellipse 35px 15px at 78% 92%, #a86040 0%, transparent 70%),
		radial-gradient(ellipse 50px 18px at 50% 100%, #8b4020 0%, transparent 70%),
		radial-gradient(ellipse 25px 10px at 35% 98%, #9b5030 0%, transparent 70%),
		radial-gradient(ellipse 28px 12px at 65% 96%, #7b3018 0%, transparent 70%),
		/* Small acorn hints */
		radial-gradient(circle at 25% 90%, rgba(100, 65, 30, 0.5) 0%, transparent 4px),
		radial-gradient(circle at 72% 88%, rgba(100, 65, 30, 0.4) 0%, transparent 3px),
		radial-gradient(circle at 48% 92%, rgba(100, 65, 30, 0.3) 0%, transparent 3px);
}
